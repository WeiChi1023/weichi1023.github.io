import{s as C,f as P}from"./index.902c86f0.js";import{_ as x,E as p,a as V,b as o,w as t,r as a,o as v,D as c,G as g,k as n,t as k,p as N,j as I,y as w}from"./vendor.f4efebb8.js";const h=60,S={name:"ForgetPassword",data(){return{show:1,count:"",timer:null,forgetForm:{mobile:"",idNo:"",smsCode:"",newPassword:"",confirmPwd:""},forgetRules:{mobile:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:"blur"},{pattern:/^(?:0|86|\+86)?1[3456789]\d{9}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"}],idNo:[{required:!0,message:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",trigger:"blur"},{pattern:/^[1-9]\d{5}[1-2]\d{3}((0\d)|(1[0-2]))(([012]\d)|3[0-1])\d{3}(\d|X|x)$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8BC1\u4EF6\u53F7"}],smsCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"}],newPassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",trigger:"blur"},{pattern:/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_]+$)(?![a-z0-9]+$)(?![a-z\W_]+$)(?![0-9\W_]+$)[a-zA-Z0-9\W_]{8,30}$/,message:"\u4E0E\u5BC6\u7801\u89C4\u5219\u4E0D\u5339\u914D"}],confirmPwd:[{required:!0,trigger:"blur",validator:(r,_,m)=>{_===""?m(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801")):_!==this.forgetForm.newPassword?m(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!")):m()}}]}}},methods:{sendCode(){this.forgetForm.mobile.trim().length===0?p({message:"\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A",type:"error",duration:3*1e3}):this.forgetForm.idNo.trim().length===0?p({message:"\u8EAB\u4EFD\u8BC1\u53F7\u4E0D\u80FD\u4E3A\u7A7A",type:"error",duration:3*1e3}):(this.timer||(this.count=h,this.show=2,this.timer=setInterval(()=>{this.count>0&&this.count<=h?this.count--:(this.show=3,clearInterval(this.timer),this.timer=null)},1e3)),C(this.forgetForm).then(()=>{p({message:"\u53D1\u9001\u6210\u529F",type:"success",duration:3*1e3})}))},cancelForget(){this.$router.push({path:"/login"})},reset(){this.$refs.forgetForm.resetFields()},pwdSubmit(){this.$refs.forgetForm.validate(l=>{if(l)P(this.forgetForm).then(()=>{p({message:"\u91CD\u7F6E\u5BC6\u7801\u6210\u529F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55",type:"success",duration:3*1e3}),this.$router.push({path:"/login"})});else return!1})}}},b=l=>(N("data-v-6eff1a60"),l=l(),I(),l),q={class:"forget-container"},z=b(()=>n("div",{class:"title-container"},[n("h3",{class:"title"},"\u627E\u56DE\u5BC6\u7801")],-1)),E=w("\u786E\u5B9A"),U=w("\u91CD\u7F6E"),A=w("\u53D6\u6D88"),W=b(()=>n("p",{style:{"font-size":"11px",color:"grey"}},"\u5BC6\u7801\u89C4\u5219\uFF1A\u957F\u5EA68-30\u4F4D\uFF0C\u6570\u5B57\u3001\u5C0F\u5199\u5B57\u6BCD\u3001\u5927\u5199\u5B57\u6BCD\u3001\u7279\u6B8A\u7B26\u53F7 \u81F3\u5C11\u5305\u542B\u4E09\u79CD",-1));function Z(l,r,_,m,e,f){const i=a("el-input"),d=a("el-form-item"),u=a("el-button"),F=a("el-form"),y=a("el-card");return v(),V("div",q,[o(y,{class:"forget-form"},{default:t(()=>[o(F,{ref:"forgetForm",model:e.forgetForm,rules:e.forgetRules,"label-width":"auto",style:{"margin-bottom":"40px"}},{default:t(()=>[z,c(o(i,{type:"password"},null,512),[[g,!1]]),o(d,{prop:"mobile",label:"\u624B\u673A\u53F7\u7801"},{default:t(()=>[o(i,{ref:"mobile",modelValue:e.forgetForm.mobile,"onUpdate:modelValue":r[0]||(r[0]=s=>e.forgetForm.mobile=s),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7","prefix-icon":"el-icon-mobile"},null,8,["modelValue"])]),_:1}),o(d,{prop:"idNo",label:"\u8EAB\u4EFD\u8BC1\u53F7"},{default:t(()=>[o(i,{ref:"idNo",modelValue:e.forgetForm.idNo,"onUpdate:modelValue":r[1]||(r[1]=s=>e.forgetForm.idNo=s),placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","prefix-icon":"el-icon-postcard"},null,8,["modelValue"])]),_:1}),o(d,{prop:"smsCode",label:"\u9A8C\u8BC1\u7801"},{default:t(()=>[o(i,{ref:"smsCode",modelValue:e.forgetForm.smsCode,"onUpdate:modelValue":r[2]||(r[2]=s=>e.forgetForm.smsCode=s),type:"text",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801","prefix-icon":"el-icon-chat-line-square",style:{width:"80%"}},null,8,["modelValue"]),o(u,{type:"text",disabled:e.show===2,size:"mini",style:{width:"10%"},onClick:f.sendCode},{default:t(()=>[c(n("span",null,"\u53D1\u9001\u9A8C\u8BC1\u7801",512),[[g,e.show===1]]),c(n("span",{style:{"text-align":"center"}},k(e.count)+" s",513),[[g,e.show===2]]),c(n("span",null,"\u91CD\u53D1\u9A8C\u8BC1\u7801",512),[[g,e.show===3]])]),_:1},8,["disabled","onClick"])]),_:1}),o(d,{prop:"newPassword",label:"\u65B0\u5BC6\u7801"},{default:t(()=>[o(i,{ref:"newPassword",modelValue:e.forgetForm.newPassword,"onUpdate:modelValue":r[3]||(r[3]=s=>e.forgetForm.newPassword=s),type:"password",autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),o(d,{prop:"confirmPwd",label:"\u786E\u8BA4\u5BC6\u7801"},{default:t(()=>[o(i,{ref:"confirmPwd",modelValue:e.forgetForm.confirmPwd,"onUpdate:modelValue":r[4]||(r[4]=s=>e.forgetForm.confirmPwd=s),type:"password",autocomplete:"off",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u65B0\u5BC6\u7801","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),o(u,{type:"primary",onClick:f.pwdSubmit},{default:t(()=>[E]),_:1},8,["onClick"]),o(u,{type:"warning",onClick:f.reset},{default:t(()=>[U]),_:1},8,["onClick"]),o(u,{onClick:f.cancelForget},{default:t(()=>[A]),_:1},8,["onClick"])]),_:1},8,["model","rules"]),W]),_:1})])}var D=x(S,[["render",Z],["__scopeId","data-v-6eff1a60"]]);export{D as default};
