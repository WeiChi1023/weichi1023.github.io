(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e2d60a3"],{2354:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"goods-query"},[n("el-card",{staticClass:"box-card"},[n("el-form",{ref:"form",attrs:{inline:!0,"label-width":"auto"}},[n("el-form-item",{attrs:{label:""}},[n("el-input",{ref:"pidInput",attrs:{placeholder:"貨號/國際碼/店內碼",inputmode:"numeric",maxlength:13,type:"number"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onSubmit(t))}},model:{value:e.pid,callback:function(t){e.pid=t},expression:"pid"}},[n("el-button",{attrs:{slot:"append",type:"danger"},on:{click:function(){e.pid="",t.$refs.pidInput.focus()}},slot:"append"},[e._v("清除")])],1)],1),e._v(" "),n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查詢")])],1)],1)],1),e._v(" "),n("el-divider"),e._v(" "),null!==e.product?n("div",[n("div",{staticClass:"text item"},[n("span",[e._v("貨號: "+e._s(e.product.pluNo))])]),e._v(" "),n("div",{staticClass:"text item"},[n("span",[e._v("國際條碼: "+e._s(e.product.barcode1))])]),e._v(" "),n("div",{staticClass:"text item"},[n("span",[e._v("店內條碼: "+e._s(e.product.barcode2))])]),e._v(" "),n("div",{staticClass:"text item"},[n("span",[e._v("商品名稱:")]),e._v(" "),n("el-link",{attrs:{type:"warning",href:"http://www.tk3c.com/ptview.aspx?pidqr="+e.product.pluNo,icon:"el-icon-link"}},[e._v(e._s(e.product.pluName))]),e._v(" "),e.product.pluSpec?n("span",[e._v("( "+e._s(e.product.pluSpec)+" )")]):e._e()],1),e._v(" "),n("div",{staticClass:"text item"},[n("span",[e._v("售價: "),n("b",[e._v(e._s(e._f("toCurrency")(e.product.price)))])]),n("span",{staticStyle:{color:"#222933"}},[e._v("xs")]),e._v(" "),n("span",{staticStyle:{color:"#fed000"}},[e._v("會員價: "),n("b",[e._v(e._s(e._f("toCurrency")(e.product.vipPrice))+" ")])]),e._v(" "),n("span",{staticStyle:{color:"#222933"}},[e._v("xs")]),e._v(" "),n("span",{staticStyle:{color:"#fed000"}},[e._v("還元金金額: "),n("b",[e._v(e._s(e._f("toCurrency")(e.product.fbAmount)))])])]),e._v(" "),n("el-form",{attrs:{inline:!0,"label-width":"auto"}},[n("el-autocomplete",{directives:[{name:"show",rawName:"v-show",value:0!==e.product.mm.length,expression:"product.mm.length !== 0"}],staticStyle:{width:"85%","font-size":"28px"},attrs:{"fetch-suggestions":e.promotionNameSearch,placeholder:"輸入關鍵字以過濾促銷方案"},on:{select:e.setfiltertext},model:{value:e.filtertext,callback:function(t){e.filtertext=t},expression:"filtertext"}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:0!==e.product.mm.length,expression:"product.mm.length !== 0"}],staticStyle:{color:"#222933"}},[e._v("--")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.product.mm.length,expression:"product.mm.length !== 0"}],attrs:{type:"danger"},on:{click:function(t){return e.clearfiltertext()}}},[e._v("清除")])],1),e._v(" "),n("div",{staticClass:"text item"},[n("span")]),e._v(" "),n("div",[n("el-collapse",{attrs:{accordion:!0},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.reverseOrder(e.product.mm),(function(t){return n("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.filterOutcome(e.promoteTitle(t)+t.promoteName)>=0,expression:"filterOutcome(promoteTitle(item)+item.promoteName) >= 0"}],key:t.promoteNo,attrs:{name:t.promoteNo,disabled:e.itemDisable(e.product.pluNo,t)}},[n("template",{slot:"title"},[n("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.promoteNo))]),e._v("\n              "+e._s(""+e.promoteTitle(t)+t.promoteName+e.dmProductName(e.product,t))+"\n            ")],1),e._v(" "),n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},["N"===t.mmType||"B"===t.mmType||"F"===t.mmType?n("div",e._l(e.Plu_ConvertToGroup(e.product.pluNo,t.mmPlu),(function(r,o){return n("div",{key:o},e._l(r,(function(r){return n("div",{key:r.pluNo},["N"===t.mmType?n("div",["F"===r.mmGroupType?n("span",{staticStyle:{color:"#fed000"}},[e._v("《滿額促銷》")]):e._e(),e._v("\n                      貨號: "+e._s(r.pluNo)+" 商品名稱:\n                      "),n("el-link",{attrs:{type:"warning",href:"http://www.tk3c.com/ptview.aspx?pidqr="+r.pluNo}},[e._v(e._s(r.pluName))])],1):e._e(),e._v(" "),"B"===t.mmType?n("div",[n("span",{staticStyle:{color:"#fed000"}},[e._v("《門號套餐》")]),e._v("\n                      貨號: "+e._s(r.pluNo)+" 商品名稱:\n                      "),n("el-link",{attrs:{type:"warning",href:"http://www.tk3c.com/ptview.aspx?pidqr="+r.pluNo}},[e._v(e._s(r.pluName))])],1):e._e(),e._v(" "),"T"===t.mmType?n("div",[n("span",{staticStyle:{color:"#fed000"}},[e._v("《門號可攜》")]),e._v("\n                      貨號: "+e._s(r.pluNo)+" 商品名稱:\n                      "),n("el-link",{attrs:{type:"warning",href:"http://www.tk3c.com/ptview.aspx?pidqr="+r.pluNo}},[e._v(e._s(r.pluName))])],1):e._e(),e._v(" "),"F"===t.mmType&&"A"!==t.amtType?n("div",[0===r.dmPrice&&"F"===r.mmGroupType?n("div",[n("span",{staticStyle:{color:"#fed000"}},[e._v("《滿額送》")]),e._v("\n                        貨號: "+e._s(r.pluNo)+" 商品名稱:\n                        "),n("el-link",{attrs:{type:"warning",href:"http://www.tk3c.com/ptview.aspx?pidqr="+r.pluNo}},[e._v(e._s(r.pluName))])],1):e._e(),e._v(" "),0!==r.dmPrice&&"F"===r.mmGroupType?n("div",[n("span",{staticStyle:{color:"#fed000"}},[e._v("《滿額特價："),n("b",[e._v(" "+e._s(r.dmPrice)+" ")]),e._v("》")]),e._v("\n                        貨號: "+e._s(r.pluNo)+" 商品名稱:\n                        "),n("el-link",{attrs:{type:"warning",href:"http://www.tk3c.com/ptview.aspx?pidqr="+r.pluNo}},[e._v(e._s(r.pluName))])],1):e._e()]):e._e()])})),0)})),0):e._e()])],2)})),1),e._v(" "),n("div",{staticClass:"text item"},[n("span",[n("br")])])],1)],1):e._e()],1)],1)},o=[],i=(r("20d6"),r("ac6a"),r("f576"),r("c4c8")),a=r("7b0a"),c={name:"GoodsQuery",data:function(){return{pid:"",product:null,activeNames:[],filtertext:"",printOutMM:[],promotionTitleArray:[{value:"《買送促銷》 "},{value:"《特價銷售》 "},{value:"《數量折價》 "},{value:"《門號套餐》 "},{value:"《來店禮》 "},{value:"《生日禮》 "},{value:"《滿額送及滿額特價》 "},{value:"《信用卡滿額送》 "}]}},created:function(){var t=this;this.$nextTick((function(){t.$refs.pidInput.focus()}))},methods:{onSubmit:function(){var t=this;this.activeNames=[],this.product=null,this.filtertext="",this.$refs.pidInput.focus(),this.pid.trim()?Object(a["j"])(this.pid)?(this.pid.length>6&&this.pid.length<13&&(this.pid=this.pid.padStart(13,"0")),Object(i["a"])(this.pid,"?action=search").then((function(e){null===e?alert("查無商品"):(t.product=e,t.pid="")}))):this.$message({type:"error",message:"輸入錯誤,貨號需為0-9數字",closable:"true"}):this.$message({type:"error",message:"未輸入貨號",closable:"true"})},Plu_ConvertToGroup:function(t,e){var r={};return e.forEach((function(e){if(e.pluNo!==t){var n=e.groupNo;null===n&&(n="-1"),r.hasOwnProperty(n)?r[n].push(e):r[n]=[e]}})),r},promoteTitle:function(t){switch(t.mmType){case"N":return"《買送促銷》 ";case"D":return"《特價銷售》 ";case"M":return"《數量折價》 ";case"B":return"《門號套餐》 ";case"V":return"C"===t.amtType?"《來店禮》 ":"B"===t.amtType?"《生日禮》 ":void 0;case"F":return"《滿額送及滿額特價》 ";case"C":return"《信用卡滿額送》 ";default:return}},reverseOrder:function(t){var e=[];return t.forEach((function(t){e.unshift(t)})),e},filterOutcome:function(t){return t.indexOf(this.filtertext)},promotionNameSearch:function(t,e){var r=this.promotionTitleArray,n=t?r.filter(this.createFilter(t)):r;e(n)},dmProductName:function(t,e){if("D"!==e.mmType)return"";var r=e.mmPlu.findIndex((function(e){return e.pluNo===t.pluNo}));if(-1===r)return"";var n="1"===e.limited?"一卡一品":"",o="";switch(e.limitType){case"1":o=" 門市限量： ".concat(e.limitQTY," ");break;case"2":o=" 總部限量： ".concat(e.limitQTY," ");break;default:o=""}return" ".concat(n).concat(o,"特價： ").concat(e.mmPlu[r].dmPrice)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},setfiltertext:function(t){console.log(t)},clearfiltertext:function(){this.filtertext=""},itemDisable:function(t,e){switch(e.mmType){case"D":return!0;default:return!1}}}},s=c,u=(r("a149"),r("2877")),l=Object(u["a"])(s,n,o,!1,null,"7b312eba",null);e["default"]=l.exports},"2a15":function(t,e,r){},"7b0a":function(t,e,r){"use strict";r.d(e,"h",(function(){return n})),r.d(e,"i",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"f",(function(){return a})),r.d(e,"g",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return p})),r.d(e,"a",(function(){return m})),r.d(e,"j",(function(){return f})),r.d(e,"k",(function(){return v}));r("28a5"),r("3b2b"),r("6b54");function n(t){var e=[1,2,1,2,1,2,4,1];try{var r=t.toString(),n=new RegExp(/^\d{8}$/);if(!n.test(r))throw new Error("統一編號需要8碼");var o=e.reduce((function(t,e,n){var o=e*parseInt(r.charAt(n),10);return t+o%10+Math.floor(o/10)}),0);return o%10===0||7===parseInt(r.charAt(6),10)&&(o+1)%10===0}catch(i){return console.error(i.message),!1}}function o(t){try{if("string"!==typeof t)throw new Error("Input type should be string.");var e=new RegExp(/^[A-Z][1,2]\d{8}$/);if(!e.test(t))throw new Error("National identification number format incorrect.");return s(t)}catch(r){return console.error(r.message),!1}}function i(t){try{if("string"!==typeof t)throw new Error("Input type should be string.");var e=t.toString(),r=new RegExp(/^[A-Z]{2}\d{14}$/);if(!r.test(e))throw new Error("Citizen digital certificate format incorrect.");return!0}catch(n){return console.error(n.message),!1}}function a(t){try{if("string"!==typeof t)throw new Error("Input type should be string.");var e=t.toString(),r=new RegExp(/^\/[\dA-Z.\-+]{7}$/);if(!r.test(e))throw new Error("E-Invoice cell phone barcode format incorrect.");return!0}catch(n){return console.error(n.message),!1}}function c(t){try{if("string"!==typeof t)throw new Error("Input type should be string.");var e=t.toString(),r=new RegExp(/^[\d]{3,7}$/);if(!r.test(e))throw new Error("E-Invoice donate code format incorrect.");return!0}catch(n){return console.error(n.message),!1}}function s(t){var e=t.split(""),r=10,n=[1,10,19,28,37,46,55,64,39,73,82,2,11,20,48,29,38,47,56,65,74,83,21,3,12,30],o=["0","1","2","3","4","5","6","7","4","8","9","0","1","2","5","3","4","5","6","7","8","9","2","0","1","3"];isNaN(parseInt(e[1],r))&&(e[1]=o[t.charCodeAt(1)-"A".charCodeAt(0)]);var i=e.reduce((function(t,o,i){return 0===i?t+n[e[0].charCodeAt(0)-"A".charCodeAt(0)]:9===i?t+parseInt(e[9],r):t+parseInt(e[i],r)*(9-i)}),0);return i%10===0}function u(t){try{var e=t.toString(),r=new RegExp(/^\d{8}$/),n=new RegExp(/^2990\d{9}$/),o=new RegExp(/^2990\d{8}$/);if(n.test(e)||o.test(e)){if(n.test(e)){var i=d(e),a=t.toString().split("");if(i!==1*a[a.length-1])throw new Error("13碼卡號驗證錯誤")}}else if(!r.test(e))throw new Error("卡號格式輸入錯誤，需8、12、13碼");return!0}catch(c){return console.error(c.message),!1}}function l(t){var e=4,r=new RegExp(/^\d{8}$/),n=new RegExp(/^2990\d{9}$/),o=new RegExp(/^2990\d{8}$/),i=new RegExp(/^[A-Z][1,2]\d{8}$/),a=new RegExp(/^09\d{2}-?\d{3}-?\d{3}$/),c=new RegExp(/(\d{2,3}|\d{2,3}-?|\(\d{2,3}\))\d{3,4}\d{4}/);return r.test(t)||n.test(t)||o.test(t)?e=1:i.test(t)?e=2:a.test(t)?e=3:c.test(t)&&(e=4),e}function p(t){var e="0";return 8==t.length&&(t="2990"+t),e=t+d(t).toString(),e}function d(t){var e=t.toString().split(""),r=0,n=0,o=0;return e.every((function(t,e,o){return 12!==e&&(e%2===0?r+=1*t:n+=1*t,!0)})),o=(r+3*n).toString(),o=1*o.charAt(o.length-1),0===o?o:10-o}function m(t){var e=!1,r=/^[0-9]*[1-9][0-9]*$/;return e=r.test(t),e}function f(t){var e=/^[0-9\s]*$/;return e.test(t)}function v(t){if(16!==t.length)return!1;var e,r=0,n=!1,o=t.length-1;while(o>=0)e=parseInt(t.charAt(o),10),n&&(e*=2,e>9&&(e=e%10+1)),n=!n,r+=e,o--;return r%10===0}},a149:function(t,e,r){"use strict";r("2a15")},c4c8:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return s}));var n=r("b775"),o=r("7b0f");function i(t,e){return Object(n["a"])({baseURL:Object(o["a"])(),url:"/mPOS/product/promotion/".concat(t).concat(e),method:"get"})}function a(t){return Object(n["a"])({baseURL:Object(o["a"])(),url:"/mPOS/product/".concat(t),method:"get"})}function c(t){return Object(n["a"])({baseURL:Object(o["a"])(),url:"/mPOS/product/checkSeq",method:"post",headers:{"Content-Type":"application/json"},data:t})}function s(t){return Object(n["a"])({baseURL:Object(o["a"])(),url:"/mPOS/installment/product/".concat(t),method:"get"})}}}]);