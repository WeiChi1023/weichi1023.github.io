(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b13abc5"],{"133c":function(t,e,s){"use strict";s("d785")},"221b":function(t,e,s){"use strict";s("ef7b")},"3d1a":function(t,e,s){},"4bee":function(t,e,s){},"5c4a":function(t,e,s){},6269:function(t,e,s){},"69c2":function(t,e,s){"use strict";s("f9aa")},"6af6":function(t,e,s){"use strict";s("5c4a")},7414:function(t,e,s){},7736:function(t,e,s){"use strict";s("6269")},"822e":function(t,e,s){"use strict";s("4bee")},"830f":function(t,e,s){"use strict";s("7414")},9406:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashboard-container"},[s(t.currentRole,{tag:"component"}),t._v(" "),s("inputInvoiceDialog",{attrs:{"dialog-visible":t.openInvoiceDialog},on:{"update:dialogVisible":function(e){t.openInvoiceDialog=e},"update:dialog-visible":function(e){t.openInvoiceDialog=e}}})],1)},i=[],a=s("db72"),o=s("2f62"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashboard-editor-container"},[s("el-row",{attrs:{gutter:8}},[s("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:6},xl:{span:6}}},[s("box-card")],1),t._v(" "),s("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:6},xl:{span:6}}},[s("IotCard")],1)],1),t._v(" "),s("el-row",{attrs:{gutter:8}},[s("el-col",{staticStyle:{"margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:6},xl:{span:6}}},[s("SystemInfoCard")],1)],1)],1)},c=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"box-card-component",staticStyle:{"margin-left":"8px"}},[s("div",{staticStyle:{position:"relative"}},[s("el-avatar",[t._v(" "+t._s(t.title)+" ")]),t._v(" "),s("div",{staticClass:"progress-item"},[s("span",[t._v("店號:"+t._s(t.systemInfo.storeNo))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("span",[t._v("店名:"+t._s(t.systemInfo.storeName))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("span",[t._v("姓名:"+t._s(t.name))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("span",[t._v("TEL:"+t._s(t.systemInfo.storeTel))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("span",[t._v("訂單賒帳允許比例:"+t._s(t.systemInfo.creditPercent)+"%")])])],1)])},u=[],p={components:{},filters:{statusFilter:function(t){var e={success:"success",pending:"danger"};return e[t]}},computed:Object(a["a"])({},Object(o["c"])({systemInfo:function(t){return t.systemInfo}}),{},Object(o["b"])(["name","title","avatar","roles"])),created:function(){}},f=p,d=(s("7736"),s("221b"),s("2877")),m=Object(d["a"])(f,l,u,!1,null,"8725325e",null),v=m.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"box-card-component",staticStyle:{"margin-left":"8px"}},[s("div",{staticStyle:{position:"relative"}},[s("div",{staticClass:"progress-item"},[s("span",[t._v("系統資訊")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:t.removeSystemInfo}})],1),t._v(" "),s("div",{staticClass:"progress-item"},[s("span",[t._v("Version:"+t._s(t.version))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(" "),s("span",[t._v("裝置已註冊[ "+t._s(t.serialNumber)+" ]")])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(" "),s("span",[t._v("資料端IP:"+t._s(t.systemInfo.api))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(" "),s("span",[t._v("機碼:"+t._s(t.systemInfo.termNo))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(" "),s("span",[t._v("當日發票登入:"+t._s(t.systemInfo.invoice))]),t._v(" "),s("i",{staticClass:"el-icon-refresh",staticStyle:{color:"green"},on:{click:t.refreshInvoice}})]),t._v(" "),s("div",{staticClass:"progress-item"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(" "),s("span",[t._v("剩餘發票張數:"+t._s(t.systemInfo.remainInvoiceNo))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(" "),s("span",[t._v("營業日:"+t._s(t.systemInfo.businessDate))])]),t._v(" "),s("div",{staticClass:"progress-item"},[s("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}),t._v(" "),s("span",[t._v("發票機:"+t._s(t.systemInfo.printerNo))]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.print()}}},[t._v("測試列印")])],1)])])},h=[],g=(s("96cf"),s("3b8d")),_=s("06c7"),y=s("ecbd"),C=s("9224"),I=s("b656"),O=new y["a"]("mpos","config"),j={filters:{statusFilter:function(t){var e={success:"success",pending:"danger"};return e[t]}},data:function(){return{serialNumber:"",version:C["a"]}},computed:Object(o["c"])({systemInfo:function(t){return t.systemInfo}}),watch:{systemInfo:{handler:function(t){},deep:!0}},created:function(){this.getDeviceSn(),""!==this.systemInfo.invoice&&this.refreshInvoice()},methods:{removeSystemInfo:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("user/logout");case 2:return t.next=4,this.$store.dispatch("systemInfo/removeSystemInfo");case 4:this.$router.push("/login");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),refreshInvoice:function(){var t=this;Object(_["a"])(this.systemInfo.termNo).then((function(e){t.$store.dispatch("systemInfo/setSystemInfo",{invoice:e.invoiceNo,remainInvoiceNo:e.remainInvoiceNo})}))},getDeviceSn:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.get("serialNumber");case 2:this.serialNumber=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),print:function(){var t=this;Object(I["h"])({printerNo:this.systemInfo.printerNo,termNo:this.systemInfo.termNo}).then((function(e){t.$notify({title:"列印成功",message:"",type:"success",showClose:!0,duration:5e3})})).catch((function(){t.$notify({title:"列印失敗",message:"",type:"error",showClose:!0,duration:5e3})}))}}},x=j,S=(s("6af6"),Object(d["a"])(x,b,h,!1,null,"da57662c",null)),w=S.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"box-card-component",staticStyle:{"margin-left":"8px"}},[s("div",{staticStyle:{position:"relative"}},[s("div",{staticClass:"progress-item"},[s("span",[t._v("可用裝置")])]),t._v(" "),t._l(t.Iot.printers,(function(e,n){return s("div",{key:n,staticClass:"progress-item"},[s("span",[t._v("Printer: "+t._s(n))]),t._v(" "),s("span",[t._v("status: "+t._s(e.status_text))])])}))],2)])},k=[],D={components:{},filters:{statusFilter:function(t){var e={success:"success",pending:"danger"};return e[t]}},computed:Object(a["a"])({},Object(o["c"])({systemInfo:function(t){return t.systemInfo},Iot:function(t){return t.Iot}})),created:function(){}},$=D,L=(s("830f"),s("822e"),Object(d["a"])($,N,k,!1,null,"6c691e16",null)),P=L.exports,R={name:"DashboardAdmin",components:{BoxCard:v,SystemInfoCard:w,IotCard:P},data:function(){return{}},computed:Object(a["a"])({},Object(o["c"])({systemInfo:function(t){return t.systemInfo}})),methods:{}},E=R,M=(s("fbbe"),Object(d["a"])(E,r,c,!1,null,"72c47cf2",null)),T=M.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashboard-editor-container"},[s("div",{staticClass:" clearfix"},[s("pan-thumb",{staticStyle:{float:"left"},attrs:{image:t.avatar}},[t._v("\n      Your roles:\n      "),t._l(t.roles,(function(e){return s("span",{key:e,staticClass:"pan-info-roles"},[t._v(t._s(e))])}))],2),t._v(" "),s("github-corner",{staticStyle:{position:"absolute",top:"0px",border:"0",right:"0"}}),t._v(" "),s("div",{staticClass:"info-container"},[s("span",{staticClass:"display_name"},[t._v(t._s(t.name))]),t._v(" "),s("span",{staticStyle:{"font-size":"20px","padding-top":"20px",display:"inline-block"}},[t._v("Editor's Dashboard")])])],1),t._v(" "),s("div",[s("img",{staticClass:"emptyGif",attrs:{src:t.emptyGif}})])])},V=[],z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pan-item",style:{zIndex:t.zIndex,height:t.height,width:t.width}},[s("div",{staticClass:"pan-info"},[s("div",{staticClass:"pan-info-roles-container"},[t._t("default")],2)]),t._v(" "),s("div",{staticClass:"pan-thumb",style:{backgroundImage:"url("+t.image+")"}})])},G=[],F=(s("c5f6"),{name:"PanThumb",props:{image:{type:String,required:!0},zIndex:{type:Number,default:1},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}}),B=F,J=(s("133c"),Object(d["a"])(B,z,G,!1,null,"799537af",null)),q=J.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"github-corner",attrs:{href:"https://github.com/PanJiaChen/vue-element-admin",target:"_blank","aria-label":"View source on Github"}},[s("svg",{staticStyle:{fill:"#40c9c6",color:"#fff"},attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[s("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),t._v(" "),s("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),t._v(" "),s("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])},Z=[],Y=(s("96f2"),{}),H=Object(d["a"])(Y,A,Z,!1,null,"09fe1acc",null),K=H.exports,Q={name:"DashboardEditor",components:{PanThumb:q,GithubCorner:K},data:function(){return{emptyGif:"https://wpimg.wallstcn.com/0e03b7da-db9e-4819-ba10-9016ddfdaed3"}},computed:Object(a["a"])({},Object(o["b"])(["name","avatar","roles"]))},W=Q,X=(s("69c2"),Object(d["a"])(W,U,V,!1,null,"e3426062",null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"當日發票號碼輸入",visible:t.dialogVisible,"before-close":t.beforeClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-card",{staticClass:"box-card"},[""!==t.errorMsg?s("el-alert",{attrs:{title:t.errorMsg,type:"error",center:"","show-icon":""}}):t._e(),t._v(" "),s("el-form",{ref:"inputForm",attrs:{"label-position":"left"}},[s("el-form-item",{attrs:{label:"發票號碼"}},[s("el-input",{staticStyle:{width:"50%"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.verify(e))}},model:{value:t.invoice,callback:function(e){t.invoice=e},expression:"invoice"}}),t._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.clear()}}},[t._v("清除")])],1),t._v(" "),!1===t.valid?s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"warning"},on:{click:t.verify}},[t._v("驗證")])],1):s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("確認")])],1)],1)],1)],1)},st=[],nt={name:"InputInvoiceDialog",props:{dialogVisible:{type:Boolean,required:!1}},data:function(){return{valid:!0,errorMsg:"",invoice:""}},computed:Object(a["a"])({},Object(o["b"])(["termNo"])),created:function(){var t=this;Object(_["a"])(this.termNo).then((function(e){t.invoice=e.invoiceNo}))},methods:{verify:function(){""===this.invoice?(this.valid=!1,this.errorMsg="未輸入發票號碼"):(this.valid=!0,this.errorMsg="")},submit:function(){var t=this;this.errorMsg="",Object(_["a"])(this.termNo).then((function(e){t.invoice===e.invoiceNo?(t.$store.dispatch("systemInfo/setSystemInfo",{invoice:e.invoiceNo,remainInvoiceNo:e.remainInvoiceNo}),t.$emit("update:dialogVisible",!1)):t.errorMsg="發票輸入錯誤"}))},beforeClose:function(){this.errorMsg="",this.$emit("update:dialogVisible",!1)},clear:function(){}}},it=nt,at=Object(d["a"])(it,et,st,!1,null,null,null),ot=at.exports,rt={name:"Dashboard",components:{adminDashboard:T,editorDashboard:tt,inputInvoiceDialog:ot},data:function(){return{currentRole:"adminDashboard",openInvoiceDialog:!1}},computed:Object(a["a"])({},Object(o["b"])(["roles"]),{},Object(o["c"])({invoice:function(t){return t.systemInfo.invoice}})),watch:{invoice:function(t){}},created:function(){""===this.invoice&&(this.openInvoiceDialog=!0)}},ct=rt,lt=Object(d["a"])(ct,n,i,!1,null,null,null);e["default"]=lt.exports},"96f2":function(t,e,s){"use strict";s("d990")},b656:function(t,e,s){"use strict";s.d(e,"c",(function(){return a})),s.d(e,"g",(function(){return o})),s.d(e,"a",(function(){return r})),s.d(e,"d",(function(){return c})),s.d(e,"e",(function(){return l})),s.d(e,"f",(function(){return u})),s.d(e,"b",(function(){return p})),s.d(e,"h",(function(){return f}));var n=s("b775"),i=s("7b0f");function a(t){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/transaction/dailyAccount/".concat(t),method:"get"})}function o(t){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/transaction",method:"post",headers:{"Content-Type":"application/json"},data:t})}function r(t){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/transaction/void/reason",method:"post",headers:{"Content-Type":"application/json"},data:t})}function c(t){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/transaction/so",method:"post",headers:{"Content-Type":"application/json"},data:t})}function l(){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/transaction/so",method:"get",headers:{"Content-Type":"application/json"}})}function u(t,e,s){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/transaction/so/reprint/".concat(t,"/").concat(e),method:"post",headers:{"Content-Type":"application/json"},data:s})}function p(t){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/repair/".concat(t),method:"get"})}function f(t){return Object(n["a"])({baseURL:Object(i["a"])(),url:"/mPOS/status/printer/testprint",method:"post",headers:{"Content-Type":"application/json"},data:t})}},d785:function(t,e,s){},d990:function(t,e,s){},ef7b:function(t,e,s){},f9aa:function(t,e,s){},fbbe:function(t,e,s){"use strict";s("3d1a")}}]);